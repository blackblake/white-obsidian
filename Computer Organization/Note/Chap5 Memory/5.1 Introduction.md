
### Locality
---
不管是在图书馆案例中，还是执行计算机程序，都存在局部性(locality)：在任意一段时间内程序都只会访问地址空间中相对较小的一部分内容，就如你只会查阅图书馆的一部分藏书一样。

局部性有两种：

##### （1）时间局部性(temporal locality)

如果某个数据项被访问，那么在不久的将来它可能再次被访问。

##### （2）空间局部性(spatial locality)

如果某个数据项被访问，与它地址相邻的数据项可能很快也将被访问。


### Hierarchy Memory Diagram
---

![[Pasted image 20241120111703.png|500]]

1. 整个数据传送过程的目的：为了让Processor拿到需要的data
2. 离Processor越近，size越小，访问速度越快，造价越高
3. 之所以把更高性能的memory存储器放在离processor越近的地方，是为了让它能够更快地获取最有可能需要的data

### Hierarchy of Data
---
靠近处理器那一层中的数据是那些较远层次中数据的**子集(subset)**，所有的数据都被存在最远的那一层。依然使用图书馆的例子进行类比，书桌上的书籍是图书馆藏书的一个子集，也是学校所有图书馆藏书的一个子集。而且，离处理器越远的存储层次访问时间也越长。

### Performance
---

1. 层次化存储可以由不同的层次组成，但是数据只能在两个相邻层次之间进行复制；

2. 在相邻两层之间进行信息交换的最小单元称为块或行（block或line）​。在上述图书馆的类比中，最小的信息块就是一本书。

![[Pasted image 20241120113147.png|500]]

3. **命中率**

	如果处理器所需的数据在本层的存储中找到，称为**命中(hit)**，类比于你在桌上的某本书中找到了所需信息。如果没在本层存储中找到所需数据，称为**失效(miss)**，将访问下一级存储。可类比于你从书桌来到书架前，寻找想要的书籍；
	
	**命中率(hit ratio)** 指的是在访问本层存储时，\[ **命中的次数占总次数的比例 ]**，通常作为存储层次结构的性能衡量指标之一。失效率（miss rate）指的是在访问本层存储时失效的次数占总次数的比例；

4. 命中时间

	访问某个存储层次所需的时间，包括判断命中或失效的时间。

5. 失效惩罚

	将数据块从下层存储复制至某层所需的时间，包括数据块的访问时间、传输时间、写入目标层的时间和将数据块返回给请求者的时间

由于上层存储容量更小，并由速度更快的存储组成，命中时间也比下层存储的访问时间短，故访问下层存储的时间是失效损失的重要组成部分（即查阅书桌上的书的时间比走到书架前获得一本有用新书的时间要少得多）​