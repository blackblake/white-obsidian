
## 5.7.1 页的存放与查找

![[Pasted image 20241130003009.png|500]]

在地址转换过程中，虚拟地址的 **Virtual Page Number (VPN)** 会通过页表映射到物理地址中的 **Physical Page Number (PPN)**；而 ==页内偏移 (**Page Offset**) 在映射过程中保持 **不变**==。

1. **页大小固定：** 
	   在图中，页大小为 $2^{12}$ 字节（4 KiB），因此虚拟地址和物理地址的**低 12 位（Page offset）** 直接用于指定 **页内偏移** ，这部分不会发生变化。
    
2. **虚拟地址到物理地址的映射：**
    - 虚拟地址是 48 位，其中高 36 位用于表示虚拟页号（VPN）。
    - 物理地址是 40 位，其中高 28 位用于表示物理页号（PPN）。
    
	- 地址映射时，**页号减少(从36变为38)的原因——物理内存限制**：
	    - 虚拟地址空间可能非常大，但实际物理内存通常有限。
	    - 页号减少意味着物理地址只需要足够的页号来覆盖实际物理内存的大小。
	
 3. **1-bit的有效位(valid bit)：**
	 如果该位为无效，则该页就**不在主存中**，发生一次**缺页失效**;
	 如果该位为有效，则该页在内存中，并且该项包含物理页号。
	
4. **页表寄存器(Page table register)：**
	 用于存储页表在**内存**中的**起始地址**
	
5. **大小**（记住内存是以字节byte为最低寻址单位的）
	 在该图中，页大小为$2^{12}$个**字节**，即4KiB；
	 虚拟地址空间为$2^{48}$**字节**，物理地址空间为$2^{40}$字节；
	 页表中的表项数为$2^{36}$个，（由\[47,12]这36位指定）;
	 

## 5.7.2