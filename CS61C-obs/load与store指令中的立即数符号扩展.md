`lw`（加载字）指令的立即数需要符号扩展后加上`rs1`的值，主要是因为RISC-V架构中的立即数是12位宽的，而内存地址在RV32中是32位的。立即数的符号扩展使得`lw`指令可以加载相对当前基址的正向或负向偏移的内存地址，从而实现更灵活的内存访问。具体原因如下：
### 1. **内存地址的偏移可能为负数**

- `lw`指令的12位立即数表示的是一个偏移量，这个偏移量可以是正数（表示向前偏移）或者负数（表示向后偏移）。通过符号扩展，立即数可以从12位扩展到32位，保留其符号位（正或负），从而使指令能够访问基址寄存器`rs1`周围的内存地址。
- 例如，如果你想要从`rs1`寄存器中的基址向前或向后读取数据，符号扩展后的立即数能够表示这种正负方向的偏移。

### 2. **地址计算需要32位精度**

- 虽然`lw`指令的立即数字段只有12位宽，但内存地址是32位的。因此，符号扩展将12位的立即数转换为32位，以便与32位的`rs1`寄存器值相加，确保地址计算具有足够的精度。

### 3. **RISC-V 的I型指令格式**

- `lw`指令属于I型指令格式，其立即数是12位带符号的数。这意味着它的**最高位（第12位）表示符号**（0表示正，1表示负）。为了确保内存访问时地址的正确性，需要对这个立即数进行符号扩展，使得它能够正确表示一个32位的偏移量。

### 例子

假设我们有一个`lw`指令，如下：

`lw x5, -16(x1)`

此指令表示将`x1`寄存器中地址向后偏移16字节处的内容加载到`x5`寄存器中。这里的立即数`-16`是12位宽的，需要符号扩展为32位后，再加上`rs1`中的值，最终得到正确的内存地址。